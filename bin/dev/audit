#!/usr/bin/env bash

set -o pipefail

source "./.medic/_support/cecho.sh"
source "./.medic/_support/step.sh"

step "checking for docs errors" "mix docs 2>&1 | grep -v 'warning:' || exit 1"
step "credo" "mix credo --strict"
step "dialyzer" "mix dialyzer"
step "audit" "mix deps.audit"
step "check unused deps" "mix deps.unlock --check-unused"
